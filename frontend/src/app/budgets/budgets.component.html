<div class="container-fluid pt-4">
  <div class="btn-group pull-right">
    <button class="btn btn-info">
      <i class="fa fa-list"></i> détail de tous les budgets
    </button>
    <button class="btn btn-primary">
      <i class="fa fa-plus"></i> ajouter un budget
    </button>
  </div>

  <h3 class="text-color4 page-header">
    <i class="fa fa-bank"></i> Gestion des budgets <small>{{ pagination.totalItems }}</small>
  </h3>
  <div class="row">
    <div class="col-3 bg-light p-2 border">
      <h4>Filtres</h4>
      <form>
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Equipe" />
        </div>
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Budget" />
        </div>
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Tutelle" />
        </div>
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Nature" />
        </div>
      </form>
    </div>
    <div class="col">
      <h4 *ngIf="loading"><i class="fa fa-spinner fa-spin"></i> Chargement des budgets ...</h4>

      <table class="table table-condensed table-bordered table-striped w-100" [hidden]="loading || pagination.totalItems === 0">
        <thead class="table-dark bg-gradient-color5">
        <tr>
          <th>Equipe</th>
          <th>Budget</th>
          <th>Tutelle</th>
          <th>Nature</th>
          <th>Montant dépensé</th>
          <th>Montant disponible</th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let budget of budgets | async">
          <td class="align-middle">{{ budget.team }}</td>
          <td class="align-middle">{{ budget.name }}</td>
          <td class="align-middle">{{ budget.budget_type }}</td>
          <td class="align-middle">{{ budget.default_nature ? budget.default_nature : 'Toutes'}}</td>
          <td class="align-middle text-danger">({{ getAmountSpent(budget)|number:'1.2-2' }})</td>
          <td class="align-middle"><b>{{ getAmountLeft(budget)|number:'1.2-2' }}</b></td>
          <td>
            <div class="btn-group">
              <button type="button" class="btn btn-info btn-sm">
                <i class="fa fa-list"></i>
              </button>
              <button type="button" class="btn btn-primary btn-sm">
                <i class="fa fa-edit"></i>
              </button>
              <button type="button" class="btn btn-warning btn-sm">
                <i class="fa fa-lock"></i>
              </button>
              <button type="button" class="btn btn-danger btn-sm">
                <i class="fa fa-trash"></i>
              </button>
            </div>
          </td>
        </tr>
        </tbody>
      </table>

      <nav [hidden]="loading || (pagination.nextPage === null && pagination.prevPage === null)">
        <pagination class="pagination-sm justify-content-center"
                    previousText="&lsaquo;" nextText="&rsaquo;"
                    firstText="&laquo;" lastText="&raquo;"
                    [itemsPerPage]="pagination.itemsPerPage"
                    [totalItems]="pagination.totalItems"
                    [(ngModel)]="pagination.currentPage"
                    (pageChanged)="getPage($event)"
                    [maxSize]="9"
                    [boundaryLinks]="true"
        ></pagination>
      </nav>
    </div>
  </div>

</div>
